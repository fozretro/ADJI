# Abbreviations

- ADJI :: Advanced Digital Joystick Interface (new cartridge)
- SJI :: Slogger Joystick Interface (original cartridge)

# Electron Expansion memory usage

Note regarding the overlay routine:

#+begin_quote
The correct way for the Joystick software to emulate the Keyboard is
to intercept the OSBYTE and OSKEY calls using the "Extended Vectors"
residing in the upper part of Page D. Most games, however, stamp all
over Page D and so Slogger had to find an alternative reliable means
of interception since the Slogger Joystick interface and software is
aimed primarily at the games player.

This was achieved by a very short routine resident in a selectable
area of memory defined by the Overlay address. If no value is typed in
at the prompt for the address then the default address of &150 is
used, this rarely being used by games as it is in the middle of the
Stack !!!. Values in the range 0 to &7FF0 may be used but with
caution.
#+end_quote

For storing key definitions, Slogger used 5 locations, corresponding
to the ROM types entries in the table at $2a0 for the following ROM
banks:

| Bank | What                         |
|------+------------------------------|
|    2 | Front expansion socket       |
|    3 | Front expansion socket       |
|    8 | Keyboard                     |
|    9 | Keyboard                     |
|   10 | Lower-priority copy of BASIC |

The SJI has to go in the front expansion socket, and it contains no
ROMs, so those two bytes are known to be free.

The keyboard is not a ROM, so two bytes free there as well.

The lower-priority copy of BASIC is ignored (presumably the Electron
detects duplicate ROMs, same as the Beeb?) so that's free too.

$290 (~*TV~ settings - unused on Electron) is also used to store some
info:

#   7  6    5   4   3   2   1   0
: +---+---+---+---+---+---+---+---+
; |   | 9 |               |  NUM  +
: +---+---+---+---+---+---+---+---+

~9~ is set if 9-pin joysticks are in used, otherwise digital.

~NUM~ is the joystick interface address.

# ADJI memory usage - Electron

Keep the overlay routine. I'm not very familiar with the Electron but
Slogger presumably knew it well.

$290 can stay as-is. Set the `9` bit.

The ADJI ROM uses 3 of the ROM table bytes (2 entries for keyboard, 1
for lower-priority BASIC), and 3 unused locations: $2f5, $2f6 and
$27e.

The other ROM table bytes are unused. In theory, since the ADJI
cartridge occupies two banks, but the ADJI ROM will only use one of
them, there's an extra bank at `?&F4 EOR1` - but that's a lot of
hassle during development.

# ADJI memory usage - Master 128

Multi-load stuff won't do this, but it is typically safe to do ~*TAPE~
and then overwrite page $D. So the overlay routine will still be
necessary.

Claim a dynamic workspace page in HAZEL for the settings. Bit wasteful
(only 6/256 bytes used!), but shouldn't be a problem.

On entry to BYTEV or KEYV, HAZEL could be unmapped. Access it with
interrupts disabled, and restore the old value.

If page $D has been overwritten, the workspace address won't be known,
so the overlay routine will have to supply this.

# Games tested

## StarshipCommand

Works OK with extended vectors

## Aviator

Crashes - looks like it scribbles over page $d!

## Firebug

Works OK with overlay at &150

